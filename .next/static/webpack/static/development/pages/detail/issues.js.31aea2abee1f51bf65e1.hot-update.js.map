{"version":3,"file":"static/webpack/static\\development\\pages\\detail\\issues.js.31aea2abee1f51bf65e1.hot-update.js","sources":["webpack:///./components/SearchUser.jsx"],"sourcesContent":["import { useState } from 'react'\r\nimport { Select, Spin } from 'antd'\r\nimport debounce from 'lodash/debounce'\r\n\r\nimport api from '../lib/api'\r\n\r\nconst Option = Select.Option\r\n\r\nfunction SearchUser () {\r\n  const [fetching, setFetching] = useState(false)\r\n  const [options, setOptions] = useState([])\r\n\r\n  //debounce 用户输入的时间超过500ms才会执行\r\n  const fetchUser = debounce(value => {\r\n    console.log('fetching user', value)\r\n    setFetching(true)\r\n    setOptions([])  //清空数据\r\n\r\n    //服务端请求\r\n    api.request({\r\n      url: `/search/users?q=${value}`\r\n    })\r\n      .then(resp => {\r\n        console.log('user:', resp)\r\n        const data = resp.data.items.map(user => ({\r\n          text: user.login,\r\n          value: user.login\r\n        }))\r\n\r\n        setFetching(false)\r\n        setOptions(data)\r\n      })\r\n  }, 500)\r\n\r\n  return <Select\r\n    style={{ width: 200 }}\r\n    showSearch={true}\r\n    notFoundContent={fetching ? <Spin size=\"small\" /> : <span>nothing</span>}\r\n    filterOption={false}\r\n    placeholder=\"创建者\"\r\n    onSearch={fetchUser}\r\n    allowClear={true}\r\n  >\r\n    {\r\n      options.map(op => (\r\n        <Option value={op.value} key={op.value}>{op.text}</Option>\r\n      ))\r\n    }\r\n  </Select>\r\n}\r\n\r\nexport default SearchUser"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AADA;AAIA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AAKA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAPA;AAUA;AACA;AAAA;AAAA;AADA;AAKA;AACA;AACA;;;;A","sourceRoot":""}