{"ast":null,"code":"import _Spin from \"antd/lib/spin\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _Select from \"antd/lib/select\";\nimport React from \"react\";\nimport { useState } from 'react';\nimport debounce from 'lodash/debounce';\nimport api from '../lib/api';\nvar Option = _Select.Option;\n\nfunction SearchUser() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      fetching = _useState2[0],\n      setFetching = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      options = _useState4[0],\n      setOptions = _useState4[1];\n\n  var fetchUser = function fetchUser(value) {\n    console.log('fetching user', value);\n    setFetching(true);\n    setOptions([]); //清空数据\n    //服务端请求\n\n    api.request({\n      url: \"/search/users?q=\".concat(value)\n    }).then(function (resp) {\n      console.log('user:', resp);\n      var data = resp.data.items.map(function (user) {\n        return {\n          text: user.login,\n          value: user.login\n        };\n      });\n      setFetching(false);\n      setOptions(data);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(_Select, {\n    style: {\n      width: 200\n    },\n    showSearch: true,\n    notFoundContent: fetching ? /*#__PURE__*/React.createElement(_Spin, {\n      size: \"small\"\n    }) : /*#__PURE__*/React.createElement(\"span\", null, \"nothing\"),\n    filterOption: false,\n    placeholder: \"\\u521B\\u5EFA\\u8005\",\n    onSearch: fetchUser,\n    allowClear: true\n  }, options.map(function (op) {\n    return /*#__PURE__*/React.createElement(Option, {\n      value: op.value,\n      key: op.value\n    }, op.text);\n  }));\n}\n\nexport default SearchUser;","map":{"version":3,"sources":["E:/个人项目/gitHub项目/coco-github/components/SearchUser.jsx"],"names":["useState","debounce","api","Option","SearchUser","fetching","setFetching","options","setOptions","fetchUser","value","console","log","request","url","then","resp","data","items","map","user","text","login","width","op"],"mappings":";;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AAEA,OAAOC,QAAP,MAAqB,iBAArB;AAEA,OAAOC,GAAP,MAAgB,YAAhB;AAEA,IAAMC,MAAM,GAAG,QAAOA,MAAtB;;AAEA,SAASC,UAAT,GAAuB;AAAA,kBACWJ,QAAQ,CAAC,KAAD,CADnB;AAAA;AAAA,MACdK,QADc;AAAA,MACJC,WADI;;AAAA,mBAESN,QAAQ,CAAC,EAAD,CAFjB;AAAA;AAAA,MAEdO,OAFc;AAAA,MAELC,UAFK;;AAIrB,MAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAC,KAAK,EAAI;AACzBC,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,KAA7B;AACAJ,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,IAAAA,UAAU,CAAC,EAAD,CAAV,CAHyB,CAGT;AAEhB;;AACAN,IAAAA,GAAG,CAACW,OAAJ,CAAY;AACVC,MAAAA,GAAG,4BAAqBJ,KAArB;AADO,KAAZ,EAGGK,IAHH,CAGQ,UAAAC,IAAI,EAAI;AACZL,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBI,IAArB;AACA,UAAMC,IAAI,GAAGD,IAAI,CAACC,IAAL,CAAUC,KAAV,CAAgBC,GAAhB,CAAoB,UAAAC,IAAI;AAAA,eAAK;AACxCC,UAAAA,IAAI,EAAED,IAAI,CAACE,KAD6B;AAExCZ,UAAAA,KAAK,EAAEU,IAAI,CAACE;AAF4B,SAAL;AAAA,OAAxB,CAAb;AAKAhB,MAAAA,WAAW,CAAC,KAAD,CAAX;AACAE,MAAAA,UAAU,CAACS,IAAD,CAAV;AACD,KAZH;AAaD,GAnBD;;AAqBA,sBAAO;AACL,IAAA,KAAK,EAAE;AAAEM,MAAAA,KAAK,EAAE;AAAT,KADF;AAEL,IAAA,UAAU,EAAE,IAFP;AAGL,IAAA,eAAe,EAAElB,QAAQ,gBAAG;AAAM,MAAA,IAAI,EAAC;AAAX,MAAH,gBAA2B,4CAH/C;AAIL,IAAA,YAAY,EAAE,KAJT;AAKL,IAAA,WAAW,EAAC,oBALP;AAML,IAAA,QAAQ,EAAEI,SANL;AAOL,IAAA,UAAU,EAAE;AAPP,KAUHF,OAAO,CAACY,GAAR,CAAY,UAAAK,EAAE;AAAA,wBACZ,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAEA,EAAE,CAACd,KAAlB;AAAyB,MAAA,GAAG,EAAEc,EAAE,CAACd;AAAjC,OAAyCc,EAAE,CAACH,IAA5C,CADY;AAAA,GAAd,CAVG,CAAP;AAeD;;AAED,eAAejB,UAAf","sourcesContent":["import { useState } from 'react'\r\nimport { Select, Spin } from 'antd'\r\nimport debounce from 'lodash/debounce'\r\n\r\nimport api from '../lib/api'\r\n\r\nconst Option = Select.Option\r\n\r\nfunction SearchUser () {\r\n  const [fetching, setFetching] = useState(false)\r\n  const [options, setOptions] = useState([])\r\n\r\n  const fetchUser = value => {\r\n    console.log('fetching user', value)\r\n    setFetching(true)\r\n    setOptions([])  //清空数据\r\n\r\n    //服务端请求\r\n    api.request({\r\n      url: `/search/users?q=${value}`\r\n    })\r\n      .then(resp => {\r\n        console.log('user:', resp)\r\n        const data = resp.data.items.map(user => ({\r\n          text: user.login,\r\n          value: user.login\r\n        }))\r\n\r\n        setFetching(false)\r\n        setOptions(data)\r\n      })\r\n  }\r\n\r\n  return <Select\r\n    style={{ width: 200 }}\r\n    showSearch={true}\r\n    notFoundContent={fetching ? <Spin size=\"small\" /> : <span>nothing</span>}\r\n    filterOption={false}\r\n    placeholder=\"创建者\"\r\n    onSearch={fetchUser}\r\n    allowClear={true}\r\n  >\r\n    {\r\n      options.map(op => (\r\n        <Option value={op.value} key={op.value}>{op.text}</Option>\r\n      ))\r\n    }\r\n  </Select>\r\n}\r\n\r\nexport default SearchUser"]},"metadata":{},"sourceType":"module"}